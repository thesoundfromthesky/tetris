import{Q as h,l as c,V as u,a as d,J as x,z as y}from"./index-CfS70t6F.js";class C{constructor(t,r){this._gltf=t,this._infoTree=r}convert(t){let r=this._gltf,n=this._infoTree,a;if(!t.startsWith("/"))throw new Error("Path must start with a /");const s=t.split("/");if(s.shift(),s[s.length-1].includes(".length")){const l=s[s.length-1].split(".");s.pop(),s.push(...l)}let g=!1;for(const _ of s){const l=_==="length";if(l&&!n.__array__)throw new Error(`Path ${t} is invalid`);if(n.__ignoreObjectTree__&&(g=!0),n.__array__&&!l)n=n.__array__;else if(n=n[_],!n)throw new Error(`Path ${t} is invalid`);if(!g){if(r===void 0)throw new Error(`Path ${t} is invalid`);l||(r=r==null?void 0:r[_])}(n.__target__||l)&&(a=r)}return{object:a,info:n}}}const N={length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonTransformNode),getPropertyName:[()=>"length"]},__array__:{__target__:!0,translation:{type:"Vector3",get:e=>{var t;return(t=e._babylonTransformNode)==null?void 0:t.position},set:(e,t)=>{var r;return(r=t._babylonTransformNode)==null?void 0:r.position.copyFrom(e)},getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"position"]},rotation:{type:"Quaternion",get:e=>{var t;return(t=e._babylonTransformNode)==null?void 0:t.rotationQuaternion},set:(e,t)=>{var r,n;return(n=(r=t._babylonTransformNode)==null?void 0:r.rotationQuaternion)==null?void 0:n.copyFrom(e)},getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"rotationQuaternion"]},scale:{type:"Vector3",get:e=>{var t;return(t=e._babylonTransformNode)==null?void 0:t.scaling},set:(e,t)=>{var r;return(r=t._babylonTransformNode)==null?void 0:r.scaling.copyFrom(e)},getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"scaling"]},weights:{length:{type:"number",get:e=>e._numMorphTargets,getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},__array__:{__target__:!0,type:"number",get:(e,t)=>{var r,n;return t!==void 0?(n=(r=e._primitiveBabylonMeshes)==null?void 0:r[0].morphTargetManager)==null?void 0:n.getTarget(t).influence:void 0},getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},type:"number[]",get:(e,t)=>[0],getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},matrix:{type:"Matrix",get:e=>{var t,r,n;return c.Compose((t=e._babylonTransformNode)==null?void 0:t.scaling,(r=e._babylonTransformNode)==null?void 0:r.rotationQuaternion,(n=e._babylonTransformNode)==null?void 0:n.position)},getTarget:e=>e._babylonTransformNode,isReadOnly:!0},globalMatrix:{type:"Matrix",get:e=>{var a,s,g,_,l,f,p;const t=c.Identity();let r=e.parent;for(;r&&r.parent;)r=r.parent;const n=((a=e._babylonTransformNode)==null?void 0:a.position._isDirty)||((g=(s=e._babylonTransformNode)==null?void 0:s.rotationQuaternion)==null?void 0:g._isDirty)||((_=e._babylonTransformNode)==null?void 0:_.scaling._isDirty);if(r){const T=(l=r._babylonTransformNode)==null?void 0:l.computeWorldMatrix(!0).invert();T&&((p=(f=e._babylonTransformNode)==null?void 0:f.computeWorldMatrix(n))==null||p.multiplyToRef(T,t))}else e._babylonTransformNode&&t.copyFrom(e._babylonTransformNode.computeWorldMatrix(n));return t},getTarget:e=>e._babylonTransformNode,isReadOnly:!0},extensions:{EXT_lights_ies:{multiplier:{type:"number",get:e=>{var t,r;return(r=(t=e._babylonTransformNode)==null?void 0:t.getChildren(n=>n instanceof y,!0)[0])==null?void 0:r.intensity},getTarget:e=>{var t;return(t=e._babylonTransformNode)==null?void 0:t.getChildren(r=>r instanceof y,!0)[0]},set:(e,t)=>{if(t._babylonTransformNode){const r=t._babylonTransformNode.getChildren(n=>n instanceof y,!0)[0];r&&(r.intensity=e)}}},color:{type:"Color3",get:e=>{var t,r;return(r=(t=e._babylonTransformNode)==null?void 0:t.getChildren(n=>n instanceof y,!0)[0])==null?void 0:r.diffuse},getTarget:e=>{var t;return(t=e._babylonTransformNode)==null?void 0:t.getChildren(r=>r instanceof y,!0)[0]},set:(e,t)=>{if(t._babylonTransformNode){const r=t._babylonTransformNode.getChildren(n=>n instanceof y,!0)[0];r&&(r.diffuse=e)}}}}}}},R={length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonAnimationGroup),getPropertyName:[()=>"length"]},__array__:{}},P={length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>{var r;return(r=t.primitives[0]._instanceData)==null?void 0:r.babylonSourceMesh}),getPropertyName:[()=>"length"]},__array__:{}},F={__array__:{__target__:!0,orthographic:{xmag:{componentsCount:2,type:"Vector2",get:e=>{var t,r;return new u(((t=e._babylonCamera)==null?void 0:t.orthoLeft)??0,((r=e._babylonCamera)==null?void 0:r.orthoRight)??0)},set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.orthoLeft=e.x,t._babylonCamera.orthoRight=e.y)},getTarget:e=>e,getPropertyName:[()=>"orthoLeft",()=>"orthoRight"]},ymag:{componentsCount:2,type:"Vector2",get:e=>{var t,r;return new u(((t=e._babylonCamera)==null?void 0:t.orthoBottom)??0,((r=e._babylonCamera)==null?void 0:r.orthoTop)??0)},set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.orthoBottom=e.x,t._babylonCamera.orthoTop=e.y)},getTarget:e=>e,getPropertyName:[()=>"orthoBottom",()=>"orthoTop"]},zfar:{type:"number",get:e=>{var t;return(t=e._babylonCamera)==null?void 0:t.maxZ},set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.maxZ=e)},getTarget:e=>e,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:e=>{var t;return(t=e._babylonCamera)==null?void 0:t.minZ},set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.minZ=e)},getTarget:e=>e,getPropertyName:[()=>"minZ"]}},perspective:{aspectRatio:{type:"number",get:e=>{var t;return(t=e._babylonCamera)==null?void 0:t.getEngine().getAspectRatio(e._babylonCamera)},getTarget:e=>e,getPropertyName:[()=>"aspectRatio"],isReadOnly:!0},yfov:{type:"number",get:e=>{var t;return(t=e._babylonCamera)==null?void 0:t.fov},set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.fov=e)},getTarget:e=>e,getPropertyName:[()=>"fov"]},zfar:{type:"number",get:e=>{var t;return(t=e._babylonCamera)==null?void 0:t.maxZ},set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.maxZ=e)},getTarget:e=>e,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:e=>{var t;return(t=e._babylonCamera)==null?void 0:t.minZ},set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.minZ=e)},getTarget:e=>e,getPropertyName:[()=>"minZ"]}}}},S={__array__:{__target__:!0,emissiveFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).emissiveColor,set:(e,t,r,n)=>o(t,r,n).emissiveColor.copyFrom(e),getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"emissiveColor"]},emissiveTexture:{extensions:{KHR_texture_transform:i("emissiveTexture")}},normalTexture:{scale:{type:"number",get:(e,t,r)=>{var n;return(n=m(e,r,"bumpTexture"))==null?void 0:n.level},set:(e,t,r,n)=>{const a=m(t,n,"bumpTexture");a&&(a.level=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"level"]},extensions:{KHR_texture_transform:i("bumpTexture")}},occlusionTexture:{strength:{type:"number",get:(e,t,r)=>o(e,t,r).ambientTextureStrength,set:(e,t,r,n)=>{const a=o(t,r,n);a&&(a.ambientTextureStrength=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"ambientTextureStrength"]},extensions:{KHR_texture_transform:i("ambientTexture")}},pbrMetallicRoughness:{baseColorFactor:{type:"Color4",get:(e,t,r)=>{const n=o(e,t,r);return d.FromColor3(n.albedoColor,n.alpha)},set:(e,t,r,n)=>{const a=o(t,r,n);a.albedoColor.set(e.r,e.g,e.b),a.alpha=e.a},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"albedoColor",()=>"alpha"]},baseColorTexture:{extensions:{KHR_texture_transform:i("albedoTexture")}},metallicFactor:{type:"number",get:(e,t,r)=>o(e,t,r).metallic,set:(e,t,r,n)=>{const a=o(t,r,n);a&&(a.metallic=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"metallic"]},roughnessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).roughness,set:(e,t,r,n)=>{const a=o(t,r,n);a&&(a.roughness=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"roughness"]},metallicRoughnessTexture:{extensions:{KHR_texture_transform:i("metallicTexture")}}},extensions:{KHR_materials_anisotropy:{anisotropyStrength:{type:"number",get:(e,t,r)=>o(e,t,r).anisotropy.intensity,set:(e,t,r,n)=>{o(t,r,n).anisotropy.intensity=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"anisotropy.intensity"]},anisotropyRotation:{type:"number",get:(e,t,r)=>o(e,t,r).anisotropy.angle,set:(e,t,r,n)=>{o(t,r,n).anisotropy.angle=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"anisotropy.angle"]},anisotropyTexture:{extensions:{KHR_texture_transform:i("anisotropy","texture")}}},KHR_materials_clearcoat:{clearcoatFactor:{type:"number",get:(e,t,r)=>o(e,t,r).clearCoat.intensity,set:(e,t,r,n)=>{o(t,r,n).clearCoat.intensity=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"clearCoat.intensity"]},clearcoatRoughnessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).clearCoat.roughness,set:(e,t,r,n)=>{o(t,r,n).clearCoat.roughness=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"clearCoat.roughness"]},clearcoatTexture:{extensions:{KHR_texture_transform:i("clearCoat","texture")}},clearcoatNormalTexture:{scale:{type:"number",get:(e,t,r)=>{var n;return(n=o(e,t,r).clearCoat.bumpTexture)==null?void 0:n.level},getTarget:o,set:(e,t,r,n)=>o(t,r,n).clearCoat.bumpTexture.level=e},extensions:{KHR_texture_transform:i("clearCoat","bumpTexture")}},clearcoatRoughnessTexture:{extensions:{KHR_texture_transform:i("clearCoat","textureRoughness")}}},KHR_materials_dispersion:{dispersion:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.dispersion,getTarget:o,set:(e,t,r,n)=>o(t,r,n).subSurface.dispersion=e}},KHR_materials_emissive_strength:{emissiveStrength:{type:"number",get:(e,t,r)=>o(e,t,r).emissiveIntensity,getTarget:o,set:(e,t,r,n)=>o(t,r,n).emissiveIntensity=e}},KHR_materials_ior:{ior:{type:"number",get:(e,t,r)=>o(e,t,r).indexOfRefraction,getTarget:o,set:(e,t,r,n)=>o(t,r,n).indexOfRefraction=e}},KHR_materials_iridescence:{iridescenceFactor:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.intensity,getTarget:o,set:(e,t,r,n)=>o(t,r,n).iridescence.intensity=e},iridescenceIor:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.indexOfRefraction,getTarget:o,set:(e,t,r,n)=>o(t,r,n).iridescence.indexOfRefraction=e},iridescenceTexture:{extensions:{KHR_texture_transform:i("iridescence","texture")}},iridescenceThicknessMaximum:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.maximumThickness,getTarget:o,set:(e,t,r,n)=>o(t,r,n).iridescence.maximumThickness=e},iridescenceThicknessMinimum:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.minimumThickness,getTarget:o,set:(e,t,r,n)=>o(t,r,n).iridescence.minimumThickness=e},iridescenceThicknessTexture:{extensions:{KHR_texture_transform:i("iridescence","thicknessTexture")}}},KHR_materials_sheen:{sheenColorFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).sheen.color,getTarget:o,set:(e,t,r,n)=>o(t,r,n).sheen.color.copyFrom(e)},sheenColorTexture:{extensions:{KHR_texture_transform:i("sheen","texture")}},sheenRoughnessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).sheen.intensity,getTarget:o,set:(e,t,r,n)=>o(t,r,n).sheen.intensity=e},sheenRoughnessTexture:{extensions:{KHR_texture_transform:i("sheen","thicknessTexture")}}},KHR_materials_specular:{specularFactor:{type:"number",get:(e,t,r)=>o(e,t,r).metallicF0Factor,getTarget:o,set:(e,t,r,n)=>o(t,r,n).metallicF0Factor=e,getPropertyName:[()=>"metallicF0Factor"]},specularColorFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).metallicReflectanceColor,getTarget:o,set:(e,t,r,n)=>o(t,r,n).metallicReflectanceColor.copyFrom(e),getPropertyName:[()=>"metallicReflectanceColor"]},specularTexture:{extensions:{KHR_texture_transform:i("metallicReflectanceTexture")}},specularColorTexture:{extensions:{KHR_texture_transform:i("reflectanceTexture")}}},KHR_materials_transmission:{transmissionFactor:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.refractionIntensity,getTarget:o,set:(e,t,r,n)=>o(t,r,n).subSurface.refractionIntensity=e,getPropertyName:[()=>"subSurface.refractionIntensity"]},transmissionTexture:{extensions:{KHR_texture_transform:i("subSurface","refractionIntensityTexture")}}},KHR_materials_diffuse_transmission:{diffuseTransmissionFactor:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.translucencyIntensity,getTarget:o,set:(e,t,r,n)=>o(t,r,n).subSurface.translucencyIntensity=e},diffuseTransmissionTexture:{extensions:{KHR_texture_transform:i("subSurface","translucencyIntensityTexture")}},diffuseTransmissionColorFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).subSurface.translucencyColor,getTarget:o,set:(e,t,r,n)=>{var a;return e&&((a=o(t,r,n).subSurface.translucencyColor)==null?void 0:a.copyFrom(e))}},diffuseTransmissionColorTexture:{extensions:{KHR_texture_transform:i("subSurface","translucencyColorTexture")}}},KHR_materials_volume:{attenuationColor:{type:"Color3",get:(e,t,r)=>o(e,t,r).subSurface.tintColor,getTarget:o,set:(e,t,r,n)=>o(t,r,n).subSurface.tintColor.copyFrom(e)},attenuationDistance:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.tintColorAtDistance,getTarget:o,set:(e,t,r,n)=>o(t,r,n).subSurface.tintColorAtDistance=e},thicknessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.maximumThickness,getTarget:o,set:(e,t,r,n)=>o(t,r,n).subSurface.maximumThickness=e},thicknessTexture:{extensions:{KHR_texture_transform:i("subSurface","thicknessTexture")}}}}}},K={KHR_lights_punctual:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonLight),getPropertyName:[e=>"length"]},__array__:{__target__:!0,color:{type:"Color3",get:e=>{var t;return(t=e._babylonLight)==null?void 0:t.diffuse},set:(e,t)=>{var r;return(r=t._babylonLight)==null?void 0:r.diffuse.copyFrom(e)},getTarget:e=>e._babylonLight,getPropertyName:[e=>"diffuse"]},intensity:{type:"number",get:e=>{var t;return(t=e._babylonLight)==null?void 0:t.intensity},set:(e,t)=>t._babylonLight?t._babylonLight.intensity=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"intensity"]},range:{type:"number",get:e=>{var t;return(t=e._babylonLight)==null?void 0:t.range},set:(e,t)=>t._babylonLight?t._babylonLight.range=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"range"]},spot:{innerConeAngle:{type:"number",get:e=>{var t;return(t=e._babylonLight)==null?void 0:t.innerAngle},set:(e,t)=>t._babylonLight?t._babylonLight.innerAngle=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"innerConeAngle"]},outerConeAngle:{type:"number",get:e=>{var t;return(t=e._babylonLight)==null?void 0:t.angle},set:(e,t)=>t._babylonLight?t._babylonLight.angle=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"outerConeAngle"]}}}}},EXT_lights_ies:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonLight),getPropertyName:[e=>"length"]}}},EXT_lights_image_based:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonTexture),getPropertyName:[e=>"length"]},__array__:{__target__:!0,intensity:{type:"number",get:e=>{var t;return(t=e._babylonTexture)==null?void 0:t.level},set:(e,t)=>{t._babylonTexture&&(t._babylonTexture.level=e)},getTarget:e=>e._babylonTexture},rotation:{type:"Quaternion",get:e=>{var t;return e._babylonTexture&&h.FromRotationMatrix((t=e._babylonTexture)==null?void 0:t.getReflectionTextureMatrix())},set:(e,t)=>{var r;t._babylonTexture&&((r=t._babylonTexture.getScene())!=null&&r.useRightHandedSystem||(e=h.Inverse(e)),c.FromQuaternionToRef(e,t._babylonTexture.getReflectionTextureMatrix()))},getTarget:e=>e._babylonTexture}}}}};function m(e,t,r,n){const a=o(e);return n?a[r][n]:a[r]}function o(e,t,r){var n,a;return(a=(n=e._data)==null?void 0:n[(r==null?void 0:r.fillMode)??x.MATERIAL_TriangleFillMode])==null?void 0:a.babylonMaterial}function i(e,t){return{offset:{componentsCount:2,type:"Vector2",get:(r,n,a)=>{const s=m(r,a,e,t);return new u(s==null?void 0:s.uOffset,s==null?void 0:s.vOffset)},getTarget:o,set:(r,n,a,s)=>{const g=m(n,s,e,t);g.uOffset=r.x,g.vOffset=r.y},getPropertyName:[()=>`${e}${t?"."+t:""}.uOffset`,()=>`${e}${t?"."+t:""}.vOffset`]},rotation:{type:"number",get:(r,n,a)=>{var s;return(s=m(r,a,e,t))==null?void 0:s.wAng},getTarget:o,set:(r,n,a,s)=>m(n,s,e,t).wAng=r,getPropertyName:[()=>`${e}${t?"."+t:""}.wAng`]},scale:{componentsCount:2,type:"Vector2",get:(r,n,a)=>{const s=m(r,a,e,t);return new u(s==null?void 0:s.uScale,s==null?void 0:s.vScale)},getTarget:o,set:(r,n,a,s)=>{const g=m(n,s,e,t);g.uScale=r.x,g.vScale=r.y},getPropertyName:[()=>`${e}${t?"."+t:""}.uScale`,()=>`${e}${t?"."+t:""}.vScale`]}}}const b={cameras:F,nodes:N,materials:S,extensions:K,animations:R,meshes:P};function v(e){return new C(e,b)}function L(e){const t=e.split("/").map(n=>n.replace(/{}/g,"__array__"));let r=b;for(const n of t)n&&(r=r[n]);if(r&&r.type&&r.get)return r}function M(e,t){const r=e.split("/").map(a=>a.replace(/{}/g,"__array__"));let n=b;for(const a of r)a&&(n=n[a]);n&&n.type&&n.get&&(n.interpolation=t)}function w(e,t){const r=e.split("/").map(a=>a.replace(/{}/g,"__array__"));let n=b;for(const a of r)if(a){if(!n[a]){if(a==="?"){n.__ignoreObjectTree__=!0;continue}n[a]={},a==="__array__"&&(n[a].__target__=!0)}n=n[a]}Object.assign(n,t)}export{w as A,v as G,M as S,L as a};
