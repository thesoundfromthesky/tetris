const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CfS70t6F.js","./index-D-73uZs9.css","./flowGraphCodeExecutionBlock-BhDD_B2l.js","./flowGraphGLTFDataProvider-DE_RKci3.js"])))=>i.map(i=>d[i]);
import{s as a,F as at,t as j,v as U,w as rt,L as _,x as $,y as et,Q as Y,b as nt,u as it,r as ct}from"./index-CfS70t6F.js";import{G as lt,A as D}from"./objectModelMapping-D4YYZYlG.js";import{g as st,a as z}from"./declarationMapper-s1Z0h-kj.js";const Z={};function pt(e,t,o){Z[`${e}/${t}`]=o}function ut(e){switch(e){case"FlowGraphPlayAnimationBlock":return async()=>(await a(async()=>{const{FlowGraphPlayAnimationBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b8);return{FlowGraphPlayAnimationBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphPlayAnimationBlock;case"FlowGraphStopAnimationBlock":return async()=>(await a(async()=>{const{FlowGraphStopAnimationBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b9);return{FlowGraphStopAnimationBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphStopAnimationBlock;case"FlowGraphPauseAnimationBlock":return async()=>(await a(async()=>{const{FlowGraphPauseAnimationBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.ba);return{FlowGraphPauseAnimationBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphPauseAnimationBlock;case"FlowGraphInterpolationBlock":return async()=>(await a(async()=>{const{FlowGraphInterpolationBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bb);return{FlowGraphInterpolationBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphInterpolationBlock;case"FlowGraphSceneReadyEventBlock":return async()=>(await a(async()=>{const{FlowGraphSceneReadyEventBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.by);return{FlowGraphSceneReadyEventBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSceneReadyEventBlock;case"FlowGraphSceneTickEventBlock":return async()=>(await a(async()=>{const{FlowGraphSceneTickEventBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bB);return{FlowGraphSceneTickEventBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSceneTickEventBlock;case"FlowGraphSendCustomEventBlock":return async()=>(await a(async()=>{const{FlowGraphSendCustomEventBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bA);return{FlowGraphSendCustomEventBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSendCustomEventBlock;case"FlowGraphReceiveCustomEventBlock":return async()=>(await a(async()=>{const{FlowGraphReceiveCustomEventBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bz);return{FlowGraphReceiveCustomEventBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphReceiveCustomEventBlock;case"FlowGraphMeshPickEventBlock":return async()=>(await a(async()=>{const{FlowGraphMeshPickEventBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bx);return{FlowGraphMeshPickEventBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMeshPickEventBlock;case"FlowGraphEBlock":return async()=>(await a(async()=>{const{FlowGraphEBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphEBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphEBlock;case"FlowGraphPIBlock":return async()=>(await a(async()=>{const{FlowGraphPiBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphPiBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphPiBlock;case"FlowGraphInfBlock":return async()=>(await a(async()=>{const{FlowGraphInfBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphInfBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphInfBlock;case"FlowGraphNaNBlock":return async()=>(await a(async()=>{const{FlowGraphNaNBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphNaNBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphNaNBlock;case"FlowGraphRandomBlock":return async()=>(await a(async()=>{const{FlowGraphRandomBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphRandomBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphRandomBlock;case"FlowGraphAddBlock":return async()=>(await a(async()=>{const{FlowGraphAddBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAddBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAddBlock;case"FlowGraphSubtractBlock":return async()=>(await a(async()=>{const{FlowGraphSubtractBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphSubtractBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSubtractBlock;case"FlowGraphMultiplyBlock":return async()=>(await a(async()=>{const{FlowGraphMultiplyBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphMultiplyBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMultiplyBlock;case"FlowGraphDivideBlock":return async()=>(await a(async()=>{const{FlowGraphDivideBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphDivideBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphDivideBlock;case"FlowGraphAbsBlock":return async()=>(await a(async()=>{const{FlowGraphAbsBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAbsBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAbsBlock;case"FlowGraphSignBlock":return async()=>(await a(async()=>{const{FlowGraphSignBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphSignBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSignBlock;case"FlowGraphTruncBlock":return async()=>(await a(async()=>{const{FlowGraphTruncBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphTruncBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTruncBlock;case"FlowGraphFloorBlock":return async()=>(await a(async()=>{const{FlowGraphFloorBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphFloorBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphFloorBlock;case"FlowGraphCeilBlock":return async()=>(await a(async()=>{const{FlowGraphCeilBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphCeilBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCeilBlock;case"FlowGraphRoundBlock":return async()=>(await a(async()=>{const{FlowGraphRoundBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphRoundBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphRoundBlock;case"FlowGraphFractBlock":return async()=>(await a(async()=>{const{FlowGraphFractionBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphFractionBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphFractionBlock;case"FlowGraphNegationBlock":return async()=>(await a(async()=>{const{FlowGraphNegationBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphNegationBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphNegationBlock;case"FlowGraphModuloBlock":return async()=>(await a(async()=>{const{FlowGraphModuloBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphModuloBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphModuloBlock;case"FlowGraphMinBlock":return async()=>(await a(async()=>{const{FlowGraphMinBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphMinBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMinBlock;case"FlowGraphMaxBlock":return async()=>(await a(async()=>{const{FlowGraphMaxBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphMaxBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMaxBlock;case"FlowGraphClampBlock":return async()=>(await a(async()=>{const{FlowGraphClampBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphClampBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphClampBlock;case"FlowGraphSaturateBlock":return async()=>(await a(async()=>{const{FlowGraphSaturateBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphSaturateBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSaturateBlock;case"FlowGraphMathInterpolationBlock":return async()=>(await a(async()=>{const{FlowGraphMathInterpolationBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphMathInterpolationBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMathInterpolationBlock;case"FlowGraphEqualityBlock":return async()=>(await a(async()=>{const{FlowGraphEqualityBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphEqualityBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphEqualityBlock;case"FlowGraphLessThanBlock":return async()=>(await a(async()=>{const{FlowGraphLessThanBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphLessThanBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphLessThanBlock;case"FlowGraphLessThanOrEqualBlock":return async()=>(await a(async()=>{const{FlowGraphLessThanOrEqualBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphLessThanOrEqualBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphLessThanOrEqualBlock;case"FlowGraphGreaterThanBlock":return async()=>(await a(async()=>{const{FlowGraphGreaterThanBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphGreaterThanBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphGreaterThanBlock;case"FlowGraphGreaterThanOrEqualBlock":return async()=>(await a(async()=>{const{FlowGraphGreaterThanOrEqualBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphGreaterThanOrEqualBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphGreaterThanOrEqualBlock;case"FlowGraphIsNaNBlock":return async()=>(await a(async()=>{const{FlowGraphIsNanBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphIsNanBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphIsNanBlock;case"FlowGraphIsInfBlock":return async()=>(await a(async()=>{const{FlowGraphIsInfinityBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphIsInfinityBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphIsInfinityBlock;case"FlowGraphDegToRadBlock":return async()=>(await a(async()=>{const{FlowGraphDegToRadBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphDegToRadBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphDegToRadBlock;case"FlowGraphRadToDegBlock":return async()=>(await a(async()=>{const{FlowGraphRadToDegBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphRadToDegBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphRadToDegBlock;case"FlowGraphSinBlock":return async()=>(await a(async()=>{const{FlowGraphSinBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphSinBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSinBlock;case"FlowGraphCosBlock":return async()=>(await a(async()=>{const{FlowGraphCosBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphCosBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCosBlock;case"FlowGraphTanBlock":return async()=>(await a(async()=>{const{FlowGraphTanBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphTanBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTanBlock;case"FlowGraphASinBlock":return async()=>(await a(async()=>{const{FlowGraphAsinBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAsinBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAsinBlock;case"FlowGraphACosBlock":return async()=>(await a(async()=>{const{FlowGraphAcosBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAcosBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAcosBlock;case"FlowGraphATanBlock":return async()=>(await a(async()=>{const{FlowGraphAtanBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAtanBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAtanBlock;case"FlowGraphATan2Block":return async()=>(await a(async()=>{const{FlowGraphAtan2Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAtan2Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAtan2Block;case"FlowGraphSinhBlock":return async()=>(await a(async()=>{const{FlowGraphSinhBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphSinhBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSinhBlock;case"FlowGraphCoshBlock":return async()=>(await a(async()=>{const{FlowGraphCoshBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphCoshBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCoshBlock;case"FlowGraphTanhBlock":return async()=>(await a(async()=>{const{FlowGraphTanhBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphTanhBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTanhBlock;case"FlowGraphASinhBlock":return async()=>(await a(async()=>{const{FlowGraphAsinhBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAsinhBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAsinhBlock;case"FlowGraphACoshBlock":return async()=>(await a(async()=>{const{FlowGraphAcoshBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAcoshBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAcoshBlock;case"FlowGraphATanhBlock":return async()=>(await a(async()=>{const{FlowGraphAtanhBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphAtanhBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphAtanhBlock;case"FlowGraphExponentialBlock":return async()=>(await a(async()=>{const{FlowGraphExpBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphExpBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphExpBlock;case"FlowGraphLogBlock":return async()=>(await a(async()=>{const{FlowGraphLogBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphLogBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphLogBlock;case"FlowGraphLog2Block":return async()=>(await a(async()=>{const{FlowGraphLog2Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphLog2Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphLog2Block;case"FlowGraphLog10Block":return async()=>(await a(async()=>{const{FlowGraphLog10Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphLog10Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphLog10Block;case"FlowGraphSquareRootBlock":return async()=>(await a(async()=>{const{FlowGraphSquareRootBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphSquareRootBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSquareRootBlock;case"FlowGraphPowerBlock":return async()=>(await a(async()=>{const{FlowGraphPowerBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphPowerBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphPowerBlock;case"FlowGraphCubeRootBlock":return async()=>(await a(async()=>{const{FlowGraphCubeRootBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphCubeRootBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCubeRootBlock;case"FlowGraphBitwiseAndBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseAndBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphBitwiseAndBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBitwiseAndBlock;case"FlowGraphBitwiseOrBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseOrBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphBitwiseOrBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBitwiseOrBlock;case"FlowGraphBitwiseNotBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseNotBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphBitwiseNotBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBitwiseNotBlock;case"FlowGraphBitwiseXorBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseXorBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphBitwiseXorBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBitwiseXorBlock;case"FlowGraphBitwiseLeftShiftBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseLeftShiftBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphBitwiseLeftShiftBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBitwiseLeftShiftBlock;case"FlowGraphBitwiseRightShiftBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseRightShiftBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphBitwiseRightShiftBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBitwiseRightShiftBlock;case"FlowGraphLengthBlock":return async()=>(await a(async()=>{const{FlowGraphLengthBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphLengthBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphLengthBlock;case"FlowGraphNormalizeBlock":return async()=>(await a(async()=>{const{FlowGraphNormalizeBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphNormalizeBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphNormalizeBlock;case"FlowGraphDotBlock":return async()=>(await a(async()=>{const{FlowGraphDotBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphDotBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphDotBlock;case"FlowGraphCrossBlock":return async()=>(await a(async()=>{const{FlowGraphCrossBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphCrossBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCrossBlock;case"FlowGraphRotate2DBlock":return async()=>(await a(async()=>{const{FlowGraphRotate2DBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphRotate2DBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphRotate2DBlock;case"FlowGraphRotate3DBlock":return async()=>(await a(async()=>{const{FlowGraphRotate3DBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphRotate3DBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphRotate3DBlock;case"FlowGraphTransposeBlock":return async()=>(await a(async()=>{const{FlowGraphTransposeBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bp);return{FlowGraphTransposeBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTransposeBlock;case"FlowGraphDeterminantBlock":return async()=>(await a(async()=>{const{FlowGraphDeterminantBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bp);return{FlowGraphDeterminantBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphDeterminantBlock;case"FlowGraphInvertMatrixBlock":return async()=>(await a(async()=>{const{FlowGraphInvertMatrixBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bp);return{FlowGraphInvertMatrixBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphInvertMatrixBlock;case"FlowGraphMatrixMultiplicationBlock":return async()=>(await a(async()=>{const{FlowGraphMatrixMultiplicationBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bp);return{FlowGraphMatrixMultiplicationBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMatrixMultiplicationBlock;case"FlowGraphBranchBlock":return async()=>(await a(async()=>{const{FlowGraphBranchBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.aW);return{FlowGraphBranchBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBranchBlock;case"FlowGraphSetDelayBlock":return async()=>(await a(async()=>{const{FlowGraphSetDelayBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b6);return{FlowGraphSetDelayBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSetDelayBlock;case"FlowGraphCancelDelayBlock":return async()=>(await a(async()=>{const{FlowGraphCancelDelayBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b7);return{FlowGraphCancelDelayBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCancelDelayBlock;case"FlowGraphCallCounterBlock":return async()=>(await a(async()=>{const{FlowGraphCallCounterBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b1);return{FlowGraphCallCounterBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCallCounterBlock;case"FlowGraphDebounceBlock":return async()=>(await a(async()=>{const{FlowGraphDebounceBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b3);return{FlowGraphDebounceBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphDebounceBlock;case"FlowGraphThrottleBlock":return async()=>(await a(async()=>{const{FlowGraphThrottleBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.aZ);return{FlowGraphThrottleBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphThrottleBlock;case"FlowGraphDoNBlock":return async()=>(await a(async()=>{const{FlowGraphDoNBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.aX);return{FlowGraphDoNBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphDoNBlock;case"FlowGraphFlipFlopBlock":return async()=>(await a(async()=>{const{FlowGraphFlipFlopBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b4);return{FlowGraphFlipFlopBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphFlipFlopBlock;case"FlowGraphForLoopBlock":return async()=>(await a(async()=>{const{FlowGraphForLoopBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.aY);return{FlowGraphForLoopBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphForLoopBlock;case"FlowGraphMultiGateBlock":return async()=>(await a(async()=>{const{FlowGraphMultiGateBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.a_);return{FlowGraphMultiGateBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMultiGateBlock;case"FlowGraphSequenceBlock":return async()=>(await a(async()=>{const{FlowGraphSequenceBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b5);return{FlowGraphSequenceBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSequenceBlock;case"FlowGraphSwitchBlock":return async()=>(await a(async()=>{const{FlowGraphSwitchBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.a$);return{FlowGraphSwitchBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSwitchBlock;case"FlowGraphWaitAllBlock":return async()=>(await a(async()=>{const{FlowGraphWaitAllBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b0);return{FlowGraphWaitAllBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphWaitAllBlock;case"FlowGraphWhileLoopBlock":return async()=>(await a(async()=>{const{FlowGraphWhileLoopBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.b2);return{FlowGraphWhileLoopBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphWhileLoopBlock;case"FlowGraphConsoleLogBlock":return async()=>(await a(async()=>{const{FlowGraphConsoleLogBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.aV);return{FlowGraphConsoleLogBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphConsoleLogBlock;case"FlowGraphConditionalBlock":return async()=>(await a(async()=>{const{FlowGraphConditionalDataBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.be);return{FlowGraphConditionalDataBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphConditionalDataBlock;case"FlowGraphConstantBlock":return async()=>(await a(async()=>{const{FlowGraphConstantBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bk);return{FlowGraphConstantBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphConstantBlock;case"FlowGraphTransformCoordinatesSystemBlock":return async()=>(await a(async()=>{const{FlowGraphTransformCoordinatesSystemBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bh);return{FlowGraphTransformCoordinatesSystemBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTransformCoordinatesSystemBlock;case"FlowGraphGetAssetBlock":return async()=>(await a(async()=>{const{FlowGraphGetAssetBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bl);return{FlowGraphGetAssetBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphGetAssetBlock;case"FlowGraphGetPropertyBlock":return async()=>(await a(async()=>{const{FlowGraphGetPropertyBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bi);return{FlowGraphGetPropertyBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphGetPropertyBlock;case"FlowGraphSetPropertyBlock":return async()=>(await a(async()=>{const{FlowGraphSetPropertyBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bj);return{FlowGraphSetPropertyBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSetPropertyBlock;case"FlowGraphGetVariableBlock":return async()=>(await a(async()=>{const{FlowGraphGetVariableBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bf);return{FlowGraphGetVariableBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphGetVariableBlock;case"FlowGraphSetVariableBlock":return async()=>(await a(async()=>{const{FlowGraphSetVariableBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bg);return{FlowGraphSetVariableBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphSetVariableBlock;case"FlowGraphJsonPointerParserBlock":return async()=>(await a(async()=>{const{FlowGraphJsonPointerParserBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.br);return{FlowGraphJsonPointerParserBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphJsonPointerParserBlock;case"FlowGraphLeadingZerosBlock":return async()=>(await a(async()=>{const{FlowGraphLeadingZerosBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphLeadingZerosBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphLeadingZerosBlock;case"FlowGraphTrailingZerosBlock":return async()=>(await a(async()=>{const{FlowGraphTrailingZerosBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphTrailingZerosBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTrailingZerosBlock;case"FlowGraphOneBitsCounterBlock":return async()=>(await a(async()=>{const{FlowGraphOneBitsCounterBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bn);return{FlowGraphOneBitsCounterBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphOneBitsCounterBlock;case"FlowGraphCombineVector2Block":return async()=>(await a(async()=>{const{FlowGraphCombineVector2Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphCombineVector2Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCombineVector2Block;case"FlowGraphCombineVector3Block":return async()=>(await a(async()=>{const{FlowGraphCombineVector3Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphCombineVector3Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCombineVector3Block;case"FlowGraphCombineVector4Block":return async()=>(await a(async()=>{const{FlowGraphCombineVector4Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphCombineVector4Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCombineVector4Block;case"FlowGraphCombineMatrixBlock":return async()=>(await a(async()=>{const{FlowGraphCombineMatrixBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphCombineMatrixBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphCombineMatrixBlock;case"FlowGraphExtractVector2Block":return async()=>(await a(async()=>{const{FlowGraphExtractVector2Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphExtractVector2Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphExtractVector2Block;case"FlowGraphExtractVector3Block":return async()=>(await a(async()=>{const{FlowGraphExtractVector3Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphExtractVector3Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphExtractVector3Block;case"FlowGraphExtractVector4Block":return async()=>(await a(async()=>{const{FlowGraphExtractVector4Block:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphExtractVector4Block:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphExtractVector4Block;case"FlowGraphExtractMatrixBlock":return async()=>(await a(async()=>{const{FlowGraphExtractMatrixBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bo);return{FlowGraphExtractMatrixBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphExtractMatrixBlock;case"FlowGraphTransformVectorBlock":return async()=>(await a(async()=>{const{FlowGraphTransformBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphTransformBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTransformBlock;case"FlowGraphTransformCoordinatesBlock":return async()=>(await a(async()=>{const{FlowGraphTransformCoordinatesBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bq);return{FlowGraphTransformCoordinatesBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphTransformCoordinatesBlock;case"FlowGraphMatrixDecompose":return async()=>(await a(async()=>{const{FlowGraphMatrixDecomposeBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bp);return{FlowGraphMatrixDecomposeBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMatrixDecomposeBlock;case"FlowGraphMatrixCompose":return async()=>(await a(async()=>{const{FlowGraphMatrixComposeBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bp);return{FlowGraphMatrixComposeBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphMatrixComposeBlock;case"FlowGraphBooleanToFloat":return async()=>(await a(async()=>{const{FlowGraphBooleanToFloat:t}=await import("./index-CfS70t6F.js").then(o=>o.bs);return{FlowGraphBooleanToFloat:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBooleanToFloat;case"FlowGraphBooleanToInt":return async()=>(await a(async()=>{const{FlowGraphBooleanToInt:t}=await import("./index-CfS70t6F.js").then(o=>o.bs);return{FlowGraphBooleanToInt:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBooleanToInt;case"FlowGraphFloatToBoolean":return async()=>(await a(async()=>{const{FlowGraphFloatToBoolean:t}=await import("./index-CfS70t6F.js").then(o=>o.bs);return{FlowGraphFloatToBoolean:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphFloatToBoolean;case"FlowGraphIntToBoolean":return async()=>(await a(async()=>{const{FlowGraphIntToBoolean:t}=await import("./index-CfS70t6F.js").then(o=>o.bs);return{FlowGraphIntToBoolean:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphIntToBoolean;case"FlowGraphIntToFloat":return async()=>(await a(async()=>{const{FlowGraphIntToFloat:t}=await import("./index-CfS70t6F.js").then(o=>o.bs);return{FlowGraphIntToFloat:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphIntToFloat;case"FlowGraphFloatToInt":return async()=>(await a(async()=>{const{FlowGraphFloatToInt:t}=await import("./index-CfS70t6F.js").then(o=>o.bs);return{FlowGraphFloatToInt:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphFloatToInt;case"FlowGraphEasingBlock":return async()=>(await a(async()=>{const{FlowGraphEasingBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bc);return{FlowGraphEasingBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphEasingBlock;case"FlowGraphBezierCurveEasing":return async()=>(await a(async()=>{const{FlowGraphBezierCurveEasingBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bd);return{FlowGraphBezierCurveEasingBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphBezierCurveEasingBlock;case"FlowGraphPointerOverEventBlock":return async()=>(await a(async()=>{const{FlowGraphPointerOverEventBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bD);return{FlowGraphPointerOverEventBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphPointerOverEventBlock;case"FlowGraphPointerOutEventBlock":return async()=>(await a(async()=>{const{FlowGraphPointerOutEventBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bC);return{FlowGraphPointerOutEventBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphPointerOutEventBlock;case"FlowGraphContextBlock":return async()=>(await a(async()=>{const{FlowGraphContextBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bt);return{FlowGraphContextBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphContextBlock;case"FlowGraphArrayIndexBlock":return async()=>(await a(async()=>{const{FlowGraphArrayIndexBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bu);return{FlowGraphArrayIndexBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphArrayIndexBlock;case"FlowGraphCodeExecutionBlock":return async()=>(await a(async()=>{const{FlowGraphCodeExecutionBlock:t}=await import("./flowGraphCodeExecutionBlock-BhDD_B2l.js");return{FlowGraphCodeExecutionBlock:t}},__vite__mapDeps([2,0,1]),import.meta.url)).FlowGraphCodeExecutionBlock;case"FlowGraphIndexOfBlock":return async()=>(await a(async()=>{const{FlowGraphIndexOfBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bv);return{FlowGraphIndexOfBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphIndexOfBlock;case"FlowGraphFunctionReference":return async()=>(await a(async()=>{const{FlowGraphFunctionReferenceBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bw);return{FlowGraphFunctionReferenceBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphFunctionReferenceBlock;case"FlowGraphDataSwitchBlock":return async()=>(await a(async()=>{const{FlowGraphDataSwitchBlock:t}=await import("./index-CfS70t6F.js").then(o=>o.bm);return{FlowGraphDataSwitchBlock:t}},__vite__mapDeps([0,1]),import.meta.url)).FlowGraphDataSwitchBlock;default:if(Z[e])return Z[e];throw new Error(`Unknown block name ${e}`)}}function ht(e,t){for(const o of e)for(const r of o.dataOutputs)if(r.uniqueId===t)return r;throw new Error("Could not find data out connection with unique id "+t)}function wt(e,t){for(const o of e)if(o instanceof j){for(const r of o.signalInputs)if(r.uniqueId===t)return r}throw new Error("Could not find signal in connection with unique id "+t)}async function _t(e,t){const o=await Promise.all(e.allBlocks.map(async r=>ut(r.className)()));return mt(e,t,o)}function mt(e,t,o){const r=t.coordinator.createGraph(),n=[],c=t.valueParseFunction??U;for(let i=0;i<e.allBlocks.length;i++){const l=e.allBlocks[i],s=kt(l,{scene:t.coordinator.config.scene,pathConverter:t.pathConverter,assetsContainer:t.coordinator.config.scene,valueParseFunction:c},o[i]);n.push(s),s instanceof at&&r.addEventBlock(s)}for(const i of n){for(const l of i.dataInputs)for(const s of l.connectedPointIds){const G=ht(n,s);l.connectTo(G)}if(i instanceof j)for(const l of i.signalOutputs)for(const s of l.connectedPointIds){const G=wt(n,s);l.connectTo(G)}}for(const i of e.executionContexts)Gt(i,{graph:r,valueParseFunction:c},e.rightHanded);return r}function Gt(e,t,o){var i,l,s,G,m,v,E,L,O,C;const r=t.graph.createContext();e.enableLogging&&(r.enableLogging=!0),r.treatDataAsRightHanded=o||!1;const n=t.valueParseFunction??U;r.uniqueId=e.uniqueId;const c=r.getScene();if(e._assetsContext){const u=e._assetsContext,T={meshes:(i=u.meshes)==null?void 0:i.map(p=>c.getMeshById(p)),lights:(l=u.lights)==null?void 0:l.map(p=>c.getLightByName(p)),cameras:(s=u.cameras)==null?void 0:s.map(p=>c.getCameraByName(p)),materials:(G=u.materials)==null?void 0:G.map(p=>c.getMaterialById(p)),textures:(m=u.textures)==null?void 0:m.map(p=>c.getTextureByName(p)),animations:(v=u.animations)==null?void 0:v.map(p=>c.animations.find(W=>W.name===p)),skeletons:(E=u.skeletons)==null?void 0:E.map(p=>c.getSkeletonByName(p)),particleSystems:(L=u.particleSystems)==null?void 0:L.map(p=>c.getParticleSystemById(p)),animationGroups:(O=u.animationGroups)==null?void 0:O.map(p=>c.getAnimationGroupByName(p)),transformNodes:(C=u.transformNodes)==null?void 0:C.map(p=>c.getTransformNodeById(p)),rootNodes:[],multiMaterials:[],morphTargetManagers:[],geometries:[],actionManagers:[],environmentTexture:null,postProcesses:[],sounds:null,effectLayers:[],layers:[],reflectionProbes:[],lensFlareSystems:[],proceduralTextures:[],getNodes:function(){throw new Error("Function not implemented.")}};r.assetsContext=T}for(const u in e._userVariables){const T=n(u,e._userVariables,r.assetsContext,c);r.userVariables[u]=T}for(const u in e._connectionValues){const T=n(u,e._connectionValues,r.assetsContext,c);r._setConnectionValueByKey(u,T)}return r}function kt(e,t,o){const r={},n=t.valueParseFunction??U;if(e.config)for(const i in e.config)r[i]=n(i,e.config,t.assetsContainer||t.scene,t.scene);if(rt(e.className)){if(!t.pathConverter)throw new Error("Path converter is required for this block");r.pathConverter=t.pathConverter}const c=new o(r);c.uniqueId=e.uniqueId;for(let i=0;i<e.dataInputs.length;i++){const l=c.getDataInput(e.dataInputs[i].name);if(l)l.deserialize(e.dataInputs[i]);else throw new Error("Could not find data input with name "+e.dataInputs[i].name+" in block "+e.className)}for(let i=0;i<e.dataOutputs.length;i++){const l=c.getDataOutput(e.dataOutputs[i].name);if(l)l.deserialize(e.dataOutputs[i]);else throw new Error("Could not find data output with name "+e.dataOutputs[i].name+" in block "+e.className)}return c.metadata=e.metadata,c.deserialize&&c.deserialize(e),c}const Ft={float:{length:1,flowGraphType:"number",elementType:"number"},bool:{length:1,flowGraphType:"boolean",elementType:"boolean"},float2:{length:2,flowGraphType:"Vector2",elementType:"number"},float3:{length:3,flowGraphType:"Vector3",elementType:"number"},float4:{length:4,flowGraphType:"Vector4",elementType:"number"},float4x4:{length:16,flowGraphType:"Matrix",elementType:"number"},float2x2:{length:4,flowGraphType:"Matrix2D",elementType:"number"},float3x3:{length:9,flowGraphType:"Matrix3D",elementType:"number"},int:{length:1,flowGraphType:"FlowGraphInteger",elementType:"number"}};class Bt{constructor(t,o,r){this._interactivityGraph=t,this._gltf=o,this._loader=r,this._types=[],this._mappings=[],this._staticVariables=[],this._events=[],this._internalEventsCounter=0,this._nodes=[],this._parseTypes(),this._parseDeclarations(),this._parseVariables(),this._parseEvents(),this._parseNodes()}get arrays(){return{types:this._types,mappings:this._mappings,staticVariables:this._staticVariables,events:this._events,nodes:this._nodes}}_parseTypes(){if(this._interactivityGraph.types)for(const t of this._interactivityGraph.types)this._types.push(Ft[t.signature])}_parseDeclarations(){if(this._interactivityGraph.declarations)for(const t of this._interactivityGraph.declarations){const o=st(t);if(!o)throw _.Error(["No mapping found for declaration",t]),new Error("Error parsing declarations");this._mappings.push({flowGraphMapping:o,fullOperationName:t.extension?t.op+":"+t.extension:t.op})}}_parseVariables(){if(this._interactivityGraph.variables)for(const t of this._interactivityGraph.variables){const o=this._parseVariable(t);this._staticVariables.push(o)}}_parseVariable(t,o){const r=this._types[t.type];if(!r)throw _.Error(["No type found for variable",t]),new Error("Error parsing variables");if(t.value&&t.value.length!==r.length)throw _.Error(["Invalid value length for variable",t,r]),new Error("Error parsing variables");const n=t.value||[];if(!n.length)switch(r.flowGraphType){case"boolean":n.push(!1);break;case"FlowGraphInteger":n.push(0);break;case"number":n.push(NaN);break;case"Vector2":n.push(NaN,NaN);break;case"Vector3":n.push(NaN,NaN,NaN);break;case"Vector4":case"Matrix2D":case"Quaternion":n.fill(NaN,0,4);break;case"Matrix":n.fill(NaN,0,16);break;case"Matrix3D":n.fill(NaN,0,9);break}return{type:r.flowGraphType,value:o?o(n,this):n}}_parseEvents(){if(this._interactivityGraph.events)for(const t of this._interactivityGraph.events){const o={eventId:t.id||"internalEvent_"+this._internalEventsCounter++};t.values&&(o.eventData=Object.keys(t.values).map(r=>{var l;const n=(l=t.values)==null?void 0:l[r];if(!n)throw _.Error(["No value found for event key",r]),new Error("Error parsing events");const c=this._types[n.type];if(!c)throw _.Error(["No type found for event value",n]),new Error("Error parsing events");const i=typeof n.value<"u"?this._parseVariable(n):void 0;return{id:r,type:c.flowGraphType,eventData:!0,value:i}})),this._events.push(o)}}_parseNodes(){if(this._interactivityGraph.nodes)for(const t of this._interactivityGraph.nodes){if(typeof t.declaration!="number")throw _.Error(["No declaration found for node",t]),new Error("Error parsing nodes");const o=this._mappings[t.declaration];if(!o)throw _.Error(["No mapping found for node",t]),new Error("Error parsing nodes");if(o.flowGraphMapping.validation&&!o.flowGraphMapping.validation(t,this._interactivityGraph,this._gltf))throw new Error(`Error validating interactivity node ${t}`);const r=[];for(const n of o.flowGraphMapping.blocks){const c=this._getEmptyBlock(n,o.fullOperationName);this._parseNodeConfiguration(t,c,o.flowGraphMapping,n),r.push(c)}this._nodes.push({blocks:r,fullOperationName:o.fullOperationName})}}_getEmptyBlock(t,o){return{uniqueId:$(),className:t,dataInputs:[],dataOutputs:[],signalInputs:[],signalOutputs:[],config:{},type:o,metadata:{}}}_parseNodeConfiguration(t,o,r,n){const c=o.config;t.configuration&&Object.keys(t.configuration).forEach(i=>{var m,v;const l=(m=t.configuration)==null?void 0:m[i];if(!l)throw _.Error(["No value found for node configuration",i]),new Error("Error parsing node configuration");const s=(v=r.configuration)==null?void 0:v[i];if(s&&s.toBlock?s.toBlock===n:r.blocks.indexOf(n)===0){const E=(s==null?void 0:s.name)||i;(!l||typeof l.value>"u")&&typeof(s==null?void 0:s.defaultValue)<"u"?c[E]={value:s.defaultValue}:l.value.length>=1?c[E]={value:l.value.length===1?l.value[0]:l.value}:_.Warn(["Invalid value for node configuration",l]),s&&s.dataTransformer&&(c[E].value=s.dataTransformer([c[E].value],this)[0])}})}_parseNodeConnections(t){var o,r,n,c,i,l,s,G,m,v,E,L,O,C,u,T,p,W,Q;for(let N=0;N<this._nodes.length;N++){const b=(o=this._interactivityGraph.nodes)==null?void 0:o[N];if(!b)throw _.Error(["No node found for interactivity node",this._nodes[N]]),new Error("Error parsing node connections");const I=this._nodes[N],f=this._mappings[b.declaration];if(!f)throw _.Error(["No mapping found for node",b]),new Error("Error parsing node connections");const X=b.flows||{},tt=Object.keys(X).sort();for(const w of tt){const k=X[w],h=(n=(r=f.flowGraphMapping.outputs)==null?void 0:r.flows)==null?void 0:n[w],R=(h==null?void 0:h.name)||w,x=this._createNewSocketConnection(R,!0);(h&&h.toBlock&&I.blocks.find(y=>y.className===h.toBlock)||I.blocks[0]).signalOutputs.push(x);const H=k.node,F=this._nodes[H];if(!F)throw _.Error(["No node found for input node id",H]),new Error("Error parsing node connections");const g=z(F.fullOperationName);if(!g)throw _.Error(["No mapping found for input node",F]),new Error("Error parsing node connections");let B=(i=(c=g.inputs)==null?void 0:c.flows)==null?void 0:i[k.socket||"in"],A=!1;if(!B)for(const y in(l=g.inputs)==null?void 0:l.flows)y.startsWith("[")&&y.endsWith("]")&&(A=!0,B=(G=(s=g.inputs)==null?void 0:s.flows)==null?void 0:G[y]);const d=B?A?B.name.replace("$1",k.socket||""):B.name:k.socket||"in",M=B&&B.toBlock&&F.blocks.find(y=>y.className===B.toBlock)||F.blocks[0];let P=M.signalInputs.find(y=>y.name===d);P||(P=this._createNewSocketConnection(d),M.signalInputs.push(P)),P.connectedPointIds.push(x.uniqueId),x.connectedPointIds.push(P.uniqueId)}const J=b.values||{},ot=Object.keys(J);for(const w of ot){const k=J[w];let h=(v=(m=f.flowGraphMapping.inputs)==null?void 0:m.values)==null?void 0:v[w],R=!1;if(!h)for(const F in(E=f.flowGraphMapping.inputs)==null?void 0:E.values)F.startsWith("[")&&F.endsWith("]")&&(R=!0,h=(O=(L=f.flowGraphMapping.inputs)==null?void 0:L.values)==null?void 0:O[F]);const x=h?R?h.name.replace("$1",w):h.name:w,S=this._createNewSocketConnection(x);if((h&&h.toBlock&&I.blocks.find(F=>F.className===h.toBlock)||I.blocks[0]).dataInputs.push(S),k.value!==void 0){const F=this._parseVariable(k,h&&h.dataTransformer);t._connectionValues[S.uniqueId]=F}else if(typeof k.node<"u"){const F=k.node,g=k.socket||"value",B=this._nodes[F];if(!B)throw _.Error(["No node found for output socket reference",k]),new Error("Error parsing node connections");const A=z(B.fullOperationName);if(!A)throw _.Error(["No mapping found for output socket reference",k]),new Error("Error parsing node connections");let d=(u=(C=A.outputs)==null?void 0:C.values)==null?void 0:u[g],M=!1;if(!d)for(const V in(T=A.outputs)==null?void 0:T.values)V.startsWith("[")&&V.endsWith("]")&&(M=!0,d=(W=(p=A.outputs)==null?void 0:p.values)==null?void 0:W[V]);const P=d?M?d.name.replace("$1",g):d==null?void 0:d.name:g,y=d&&d.toBlock&&B.blocks.find(V=>V.className===d.toBlock)||B.blocks[0];let q=y.dataOutputs.find(V=>V.name===P);q||(q=this._createNewSocketConnection(P,!0),y.dataOutputs.push(q)),S.connectedPointIds.push(q.uniqueId),q.connectedPointIds.push(S.uniqueId)}else throw _.Error(["Invalid value for value connection",k]),new Error("Error parsing node connections")}if(f.flowGraphMapping.interBlockConnectors)for(const w of f.flowGraphMapping.interBlockConnectors){const k=w.input,h=w.output,R=w.isVariable;this._connectFlowGraphNodes(k,h,I.blocks[w.inputBlockIndex],I.blocks[w.outputBlockIndex],R)}if(f.flowGraphMapping.extraProcessor){const w=(Q=this._interactivityGraph.declarations)==null?void 0:Q[b.declaration];if(!w)throw _.Error(["No declaration found for extra processor",b]),new Error("Error parsing node connections");I.blocks=f.flowGraphMapping.extraProcessor(b,w,f.flowGraphMapping,this,I.blocks,t,this._gltf)}}}_createNewSocketConnection(t,o){return{uniqueId:$(),name:t,_connectionType:o?1:0,connectedPointIds:[]}}_connectFlowGraphNodes(t,o,r,n,c){const i=c?r.dataInputs:r.signalInputs,l=c?n.dataOutputs:n.signalOutputs,s=i.find(m=>m.name===t)||this._createNewSocketConnection(t),G=l.find(m=>m.name===o)||this._createNewSocketConnection(o,!0);i.find(m=>m.name===t)||i.push(s),l.find(m=>m.name===o)||l.push(G),s.connectedPointIds.push(G.uniqueId),G.connectedPointIds.push(s.uniqueId)}getVariableName(t){return"staticVariable_"+t}serializeToFlowGraph(){const t={uniqueId:$(),_userVariables:{},_connectionValues:{}};this._parseNodeConnections(t);for(let r=0;r<this._staticVariables.length;r++){const n=this._staticVariables[r];t._userVariables[this.getVariableName(r)]=n}return{rightHanded:!0,allBlocks:this._nodes.reduce((r,n)=>r.concat(n.blocks),[]),executionContexts:[t]}}}const K="KHR_interactivity";class dt{constructor(t){this._loader=t,this.name=K,this.enabled=this._loader.isExtensionUsed(K),this._pathConverter=lt(this._loader.gltf),t._skipStartAnimationStep=!0;const o=t.babylonScene;o&&yt(o)}dispose(){this._loader=null,delete this._pathConverter}async onReady(){var c;if(!this._loader.babylonScene||!this._pathConverter)return;const t=this._loader.babylonScene,o=(c=this._loader.gltf.extensions)==null?void 0:c.KHR_interactivity;if(!o)return;const r=new et({scene:t}),n=o.graphs.map(i=>new Bt(i,this._loader.gltf,this._loader).serializeToFlowGraph());await Promise.all(n.map(i=>_t(i,{coordinator:r,pathConverter:this._pathConverter}))),r.start()}}function yt(e){D("/extensions/KHR_interactivity/?/activeCamera/rotation",{get:()=>e.activeCamera?Y.FromRotationMatrix(e.activeCamera.getWorldMatrix()).normalize():new Y(NaN,NaN,NaN,NaN),type:"Quaternion",getTarget:()=>e.activeCamera}),D("/extensions/KHR_interactivity/?/activeCamera/position",{get:()=>e.activeCamera?e.activeCamera.position:new nt(NaN,NaN,NaN),type:"Vector3",getTarget:()=>e.activeCamera}),D("/animations/{}/extensions/KHR_interactivity/isPlaying",{get:t=>{var o;return((o=t._babylonAnimationGroup)==null?void 0:o.isPlaying)??!1},type:"boolean",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/minTime",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.from)??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/maxTime",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.to)??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/playhead",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.getCurrentFrame())??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/virtualPlayhead",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.getCurrentFrame())??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup})}pt(K,"FlowGraphGLTFDataProvider",async()=>(await a(async()=>{const{FlowGraphGLTFDataProvider:e}=await import("./flowGraphGLTFDataProvider-DE_RKci3.js");return{FlowGraphGLTFDataProvider:e}},__vite__mapDeps([3,0,1]),import.meta.url)).FlowGraphGLTFDataProvider);it(K);ct(K,!0,e=>new dt(e));export{dt as KHR_interactivity,yt as _AddInteractivityObjectModel};
